/*! sensorium 2013-04-09 */
function require(e,t,i){var r=require.resolve(e);if(null==r){i=i||e,t=t||"root";var n=Error('Failed to require "'+i+'" from "'+t+'"');throw n.path=i,n.parent=t,n.require=!0,n}var s=require.modules[r];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,require.relative(r),s)),s.exports}require.modules={},require.aliases={},require.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var t=e+"/index.js",i=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],r=0;i.length>r;r++){var e=i[r];if(require.modules.hasOwnProperty(e))return e}return require.aliases.hasOwnProperty(t)?require.aliases[t]:void 0},require.normalize=function(e,t){var i=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;t.length>r;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&i.push(t[r]);return e.concat(i).join("/")},require.register=function(e,t){require.modules[e]=t},require.alias=function(e,t){if(!require.modules.hasOwnProperty(e))throw Error('Failed to alias "'+e+'", it does not exist');require.aliases[t]=e},require.relative=function(e){function t(e,t){for(var i=e.length;i--;)if(e[i]===t)return i;return-1}function i(t){var r=i.resolve(t);return require(r,e,t)}var r=require.normalize(e,"..");return i.resolve=function(i){var n=i.charAt(0);if("/"==n)return i.slice(1);if("."==n)return require.normalize(r,i);var s=e.split("/"),o=t(s,"deps")+1;return o||(o=0),i=s.slice(0,o+1).join("/")+"/deps/"+i},i.exists=function(e){return require.modules.hasOwnProperty(i.resolve(e))},i},require.register("component-indexof/index.js",function(e,t,i){var r=[].indexOf;i.exports=function(e,t){if(r)return e.indexOf(t);for(var i=0;e.length>i;++i)if(e[i]===t)return i;return-1}}),require.register("component-emitter/index.js",function(e,t,i){function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var s=t("indexof");i.exports=r,r.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function i(){r.off(e,i),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},t._off=i,this.on(e,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r=s(i,t._off||t);return~r&&i.splice(r,1),this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i){i=i.slice(0);for(var r=0,n=i.length;n>r;++r)i[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),require.register("component-bind/index.js",function(e,t,i){var r=[].slice;i.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw Error("bind() requires a function");var i=[].slice.call(arguments,2);return function(){return t.apply(e,i.concat(r.call(arguments)))}}}),require.register("sensorium/index.js",function(e,t,i){"use strict";i.exports=t("./lib/Sensorium")}),require.register("sensorium/lib/Sensorium.js",function(e,t,i){"use strict";function r(e,t){this._init(e,t)}var n=t("./Video"),s=t("./VideoControls"),o=t("bind"),a=t("emitter");i.exports=r,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,r.prototype={_init:function(e,t){this._setContainer(e),this.options=this._extend({width:"400px",height:"300px"},t),a(this)},_setContainer:function(e){"string"==typeof e&&(e=document.querySelector(e)),this.container=e||document.body},_extend:function(e,t){if(t)for(var i in t){var r=t[i];r!==void 0&&(e[i]=r)}return e},_userMediaError:function(e){this.emit("getUserMedia:error",e)},_userMediaSuccess:function(e){this._initVideo(),this.emit("getUserMedia:success",e,this.vid),this.vid.setMediaStream(e)},_initVideo:function(){this.videoControls=this._createVideoControls(),this.vid=this._createVideo().attachControls(this.videoControls)},_createVideo:function(){return new n(this.options).attachTo(this.container)},_createVideoControls:function(){var e=new s(r.Labels);return e.on("cancel",o(this,this.stop)),e.on("capture",o(this,this.capture)),e},_createCanvas:function(){var e=document.createElement("canvas");return e.width=parseFloat(this.options.width),e.height=parseFloat(this.options.height),e},_getRenderedCanvasData:function(){return this._canvas||(this._canvas=this._createCanvas()),this._canvas.getContext("2d").drawImage(this.vid.getVideoElement(),0,0,parseFloat(this.options.width),parseFloat(this.options.height)),this._canvas.toDataURL("image/png")},_updateImage:function(e){return this.options.img&&("string"==typeof this.options.img&&(this.options.img=document.querySelector(this.options.img)),"src"in this.options.img)?(this.options.img.src=e,!0):!1},start:function(){navigator.getUserMedia({video:!0},o(this,this._userMediaSuccess),o(this,this._userMediaError))},capture:function(){var e=this._getRenderedCanvasData();this._updateImage(e),this.emit("capture",e)},stop:function(){this.videoControls.destroy(),this.vid.destroy()}},r.Labels={CANCEL:"Cancel",TAKE_PICTURE:"Take Picture"}}),require.register("sensorium/lib/Video.js",function(e,t,i){"use strict";function r(e){this.options=e,this._init()}t("bind"),i.exports=r,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.prototype={_init:function(){this.vidContainer=this._createVideoContainer(),this.vid=this.vidContainer.appendChild(this._createVideo())},_createVideo:function(){var e=document.createElement("video");return e.autoplay=!0,e},_createVideoContainer:function(){var e=document.createElement("div");return e.className="sensorium",e.style.width=this._toPixels(this.options.width),e.style.height=this._toPixels(this.options.height),e},_toPixels:function(e){return"string"==typeof e&&e.indexOf("px")>0?e:e+"px"},attachTo:function(e){return e.appendChild(this.vidContainer),this},attachControls:function(e){return this.controlPanel=document.createElement("div"),this.vid.parentNode.insertBefore(this.controlPanel,this.vid),this.controlPanel.appendChild(e.header()),this.controlPanel.appendChild(e.footer()),this},setMediaStream:function(e){return this.stream=e,this.vid.src=window.URL?window.URL.createObjectURL(e):e,this},getVideoElement:function(){return this.vid},destroy:function(){return this.stream.stop(),this.vidContainer.parentNode.removeChild(this.vidContainer),this.vid=this.vidContainer=null,this}}}),require.register("sensorium/lib/VideoControls.js",function(e,t,i){"use strict";function r(e){this.labels=e,n(this)}var n=t("emitter"),s=t("bind");i.exports=r,r.prototype={_createElement:function(e,t){var i=document.createElement(e);for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i},_removeElement:function(e){return e?e.parentNode.removeChild(e):void 0},_createLabel:function(e,t){return'<i class="'+t+'"></i> <span class="label">'+e+"</span>"},_createHeader:function(){var e=this._createElement("div",{className:"controls header"}),t=this._createElement("a",{href:"#",innerHTML:this._createLabel(this.labels.CANCEL,r.Classes.CANCEL)});return t.addEventListener("click",s(this,this.clickHandler,"cancel")),e.appendChild(t),e},_createFooter:function(){var e=this._createElement("div",{className:"controls footer"}),t=this._createElement("button",{type:"button",innerHTML:this._createLabel(this.labels.TAKE_PICTURE,r.Classes.TAKE_PICTURE)});return t.addEventListener("click",s(this,this.clickHandler,"capture")),e.appendChild(t),e},header:function(){return this._header||(this._header=this._createHeader())},footer:function(){return this._footer||(this._footer=this._createFooter())},clickHandler:function(e,t){t&&t.preventDefault(),this.emit(e)},destroy:function(){this._removeElement(this._header),this._removeElement(this._footer),this._header=this._footer=null}},r.Classes={CANCEL:"icon-remove",TAKE_PICTURE:"icon-camera"}}),require.alias("component-emitter/index.js","sensorium/deps/emitter/index.js"),require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),require.alias("component-bind/index.js","sensorium/deps/bind/index.js");